"use strict";angular.module("risevision.common.components.scrolling-list",["risevision.common.loading"]).value("BaseList",function(t){this.list=[],this.maxCount=t?t:20,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.append=function(t){for(var s=0;s<t.length;s++)this.list.push(t[s])},this.concat=function(t){this.list=this.list.concat(t)},this.add=function(s,l){this.cursor=l,this.endOfList=s.length<t,this.concat(s)},this.remove=function(t){this.list.splice(t,1)}}),angular.module("risevision.common.components.scrolling-list").directive("scrollingList",[function(){return{restrict:"E",$scope:{listService:"=",listConfig:"="},templateUrl:"scrolling-list/scrolling-list.html",link:function(){}}}]),angular.module("risevision.common.components.scrolling-list").controller("scrollingListCtrl",["$scope","BaseList","$location","$loading",function(t,s,l,i){var e=20;t.listItems=new s(e),t.search=angular.extend({sortBy:"name",count:e,reverse:!1},l.search()),t.$watch("loadingItems",function(t){t?i.start("scrolling-list-loader"):i.stop("scrolling-list-loader")});var n=function(){(t.listService&&!t.listItems.list.length||!t.listItems.endOfList&&t.listItems.cursor)&&(t.loadingItems=!0,t.listService(t.search,t.listItems.cursor).then(function(s){t.listItems.add(s.items?s.items:[],s.cursor)}).then(null,function(){t.error="Failed to load list. Please try again later."}).finally(function(){t.loadingItems=!1}))};n(),t.sortBy=function(s){t.listItems.clear(),s!==t.search.sortBy?t.search.sortBy=s:t.search.reverse=!t.search.reverse,n()},t.doSearch=function(){t.listItems.clear(),n()},t.handleScroll=function(t,s){s&&t.target.scrollTop&&t.target.scrollHeight-t.target.clientHeight-t.target.scrollTop<20&&n()},t.navigate=function(t,s){s.preventDefault(),l.path(t)}}]),function(t){try{t=angular.module("risevision.common.components.scrolling-list")}catch(s){t=angular.module("risevision.common.components.scrolling-list",[])}t.run(["$templateCache",function(t){t.put("scrolling-list/scrolling-list.html",'<div ng-controller="scrollingListCtrl"><search-filter filter-config="listConfig.filter" search="search" do-search="doSearch"></search-filter><div class="content-box half-top"><div class="list-group scrollable-list" rv-scroll-event="handleScroll($event, isEndEvent)" rv-spinner="" rv-spinner-key="scrolling-list-loader" rv-spinner-start-active="1"><table class="table-2 table-hover"><thead><tr><th ng-repeat="column in listConfig.columns" class="{{column.class}}" ng-click="sortBy(column.id)">{{ column.heading | translate }} <i ng-if="search.sortBy == column.id" class="fa ng-scope fa-long-arrow-up" ng-class="{false: \'fa-long-arrow-up\', true: \'fa-long-arrow-down\'}[search.reverse]"></i></th></tr></thead><tbody><tr class="clickable-row" ng-repeat="item in listItems.list" ui-sref="displaysettings" ng-click="navigate(\'/display/{{display.id}}\', $event)"><td ng-repeat="column in listConfig.columns" class="{{column.class}}" ng-include="column.valueTemplate"></td></tr><tr ng-show="listItems.list.length === 0 && !search.query"><td colspan="3" class="text-center"><span translate="">{{listConfig.emptyMessage}}</span></td></tr><tr ng-show="listItems.list.length === 0 && search.query"><td colspan="3" class="text-center"><span translate="">{{listConfig.noResultsMessage}}</span></td></tr></tbody></table></div></div></div>')}])}();