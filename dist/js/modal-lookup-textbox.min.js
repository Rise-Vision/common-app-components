!function(){"use strict";angular.module("risevision.app.common.components.modal-lookup-textbox",["risevision.common.loading","ui.bootstrap"])}(),function(){"use strict";angular.module("risevision.app.common.components.modal-lookup-textbox").controller("tagLookup",["$scope","tag","$modalInstance","$loading","$log","tags",function(n,a,t,o,e,l){var s="LOOKUP";n.loadingTags=!1,n.selectedTags=l?l:[],n.$watch("loadingTags",function(n){n?o.start("tag-loader"):o.stop("tag-loader")});var i=function(n){for(var a=[],t=0;t<n.length;t++){var o=n[t];if(o.type===s)for(var e=0;e<o.values.length;e++)a.push({name:o.name,value:o.values[e]})}return a},c=function(){n.loadingTags=!0,a.list().then(function(n){return n.items}).then(function(a){n.availableTags=i(a)}).then(null,function(n){e.error("Could not load tags: ",n)}).finally(function(){n.loadingTags=!1})};c(),n.selectTag=function(a){n.selectedTags.push(a)},n.removeTag=function(a){a>-1&&n.selectedTags.splice(a,1)},n.cancel=function(){t.dismiss()},n.apply=function(){t.close(n.selectedTags)}}])}(),function(){"use strict";angular.module("risevision.app.common.components.modal-lookup-textbox").filter("tagSelection",[function(){return function(n,a){if(!n)return[];for(var t=[],o=0;o<n.length;o++){for(var e=!1,l=0;l<a.length;l++)if(n[o].name===a[l].name&&n[o].value===a[l].value){e=!0;break}e||t.push(n[o])}return t}}])}(),function(){try{app=angular.module("risevision.app.common.components.modal-lookup-textbox")}catch(n){app=angular.module("risevision.app.common.components.modal-lookup-textbox",[])}app.run(["$templateCache",function(n){"use strict";n.put("modal-lookup-textbox/tag-lookup-modal.html",'<div>\n\n    <div class="modal-body">\n        <div rv-spinner rv-spinner-key="tag-loader" rv-spinner-start-active="0"></div>\n\n        <div class="content-box content-box-editable">\n            <div class="label label-tag" ng-repeat="tag in selectedTags" ng-click="removeTag($index)">\n                {{tag.name}}: <span class="tag-value">{{tag.value}}</span>\n                <span><i class="fa fa-minus-circle"></i></span>\n            </div>\n        </div>\n\n        <div class="content-box select-tags half-top">\n            <div class="input-group">\n                <span class="input-group-addon"><i class="fa fa-search"></i></span>\n                <input type="text" class="form-control" placeholder="Search Lookup Tags" ng-model="query">\n            </div>\n\n            <div class="label label-tag" ng-repeat="tag in availableTags | tagSelection:selectedTags | filter:query" ng-click="selectTag(tag)">\n                {{tag.name}}: <span class="tag-value">{{tag.value}}</span>\n                <span><i class="fa fa-plus-circle"></i></span>\n            </div>\n        </div>\n\n    </div><!-- modal-body -->\n\n    <div class="modal-footer">\n        <button type="button" class="btn btn-primary btn-fixed-width"  ng-click="apply()">Apply <i class="fa fa-white fa-check icon-right"></i></button>\n        <button type="button" class="btn btn-default btn-fixed-width" ng-click="cancel()">Cancel <i class="fa fa-times icon-right"></i></button>\n    </div>\n\n\n</div><!-- end: controller --> ')}])}(),function(){try{app=angular.module("risevision.app.common.components.modal-lookup-textbox")}catch(n){app=angular.module("risevision.app.common.components.modal-lookup-textbox",[])}app.run(["$templateCache",function(n){"use strict";n.put("modal-lookup-textbox/tag-textbox.html",'<div class="content-box content-box-editable clickable add-bottom" ng-click="openModal()">\n    <span class="edit-icon"><i class="fa fa-lg fa-pencil"></i></span>\n    <div class="label label-tag" ng-repeat="tag in tags">\n        <span class="tag-name">{{tag.name}}</span> <span class="tag-value">{{tag.value}}</span>\n    </div>\n</div>')}])}();