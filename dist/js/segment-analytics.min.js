!function(t){"use strict";t.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").factory("segmentAnalytics",["$rootScope","$window","$log","$location",function(t,e,a,n){function o(t){t&&(e.intercomSettings=e.intercomSettings||{},e.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}var i,r={};e.analytics=e.analytics||[];var c=e.analytics;c.factory=function(t){function o(e,a){"track"===t&&a&&a.length>1&&a[1]&&"object"==typeof a[1]&&(a[1].url=n.host())}return function(){var n=Array.prototype.slice.call(arguments);return o(t,n),n.unshift(t),e.analytics.push(n),a.debug("Segment Tracker",n),e.analytics}},c.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var s=0;s<c.methods.length;s++){var m=c.methods[s];r[m]=c.factory(m)}return r.load=function(t,e){if(t&&!i){o(e);var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n),i=!0}},r}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState","$location",function(t,e,a,n){var o={},i=function(){var t=a.getCopyOfProfile();e.identify(a.getUsername(),{email:t.email,firstName:t.firstName?t.firstName:"",lastName:t.lastName?t.lastName:"",companyId:a.getUserCompanyId(),companyName:a.getUserCompanyName(),company:{id:a.getUserCompanyId(),name:a.getUserCompanyName()}})};return o.initialize=function(){t.$on("risevision.user.authorized",function(){a.getUsername()&&i()}),t.$on("$viewContentLoaded",function(){e.location!==n.path()&&(e.location=n.path(),e.pageview(e.location))})},o}])}(angular);